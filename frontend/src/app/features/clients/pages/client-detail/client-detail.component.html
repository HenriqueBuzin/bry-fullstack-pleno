<div class="container mt-4" *ngIf="client && !loading">

  <div class="d-flex align-items-center mb-3 justify-content-between">

    <button class="btn btn-secondary" title="Voltar" (click)="voltar()">
      ← Voltar
    </button>

    <h2 class="mb-0">{{ client.name }}</h2>

    <div class="d-flex gap-2">
      <a
        class="btn btn-warning"
        title="Editar"
        [routerLink]="['/clientes', client.id, 'editar']"
      >
        <i class="bi bi-pencil"></i>
      </a>

      <button
        class="btn btn-danger"
        title="Excluir"
        (click)="excluir()"
        [disabled]="deleting"
      >
        <i *ngIf="!deleting" class="bi bi-trash"></i>
        <span *ngIf="deleting" class="spinner-border spinner-border-sm"></span>
      </button>
    </div>

  </div>

  <div class="row">

    <div class="col-md-6 mb-3">
      <strong>Login:</strong>
      <div>{{ client.login }}</div>
    </div>

    <div class="col-md-6 mb-3">
      <strong>Nome:</strong>
      <div>{{ client.name }}</div>
    </div>

    <div class="col-md-6 mb-3">
      <strong>CPF:</strong>
      <div>{{ formatarCpf(client.cpf) }}</div>
    </div>

    <div class="col-md-6 mb-3">
      <strong>E-mail:</strong>
      <div>{{ client.email }}</div>
    </div>

    <div class="col-md-12 mb-3">
      <strong>Endereço:</strong>
      <div>{{ client.address }}</div>
    </div>

  </div>

  <hr>

  <h4>Empresas</h4>

  <ul *ngIf="client.companies?.length; else semEmpresas">
    <li *ngFor="let e of client.companies">
      <a [routerLink]="['/empresas', e.id]" class="text-decoration-none">
        {{ e.name }}
      </a>
    </li>
  </ul>

  <ng-template #semEmpresas>
    <p class="text-muted">Nenhuma empresa vinculada.</p>
  </ng-template>

  <hr>

  <h4>Documento</h4>

  <div *ngIf="client.document_path; else semDocumento">
    <a
      class="btn btn-outline-primary"
      [href]="clientService.getDocumentoUrl(client.document_path)"
      target="_blank"
      download
    >
      <i class="bi bi-download"></i>
      Baixar documento
    </a>
  </div>

  <ng-template #semDocumento>
    <p class="text-muted">Nenhum documento enviado.</p>
  </ng-template>

</div>

<div *ngIf="loading" class="alert alert-info">
  Carregando...
</div>
